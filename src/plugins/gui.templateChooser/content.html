<script id="gui-tplchooser-content" type="text/x-template">
    {^{include ^tmpl=template /}}
</script>

<script id="gui-tplchooser-new-content" type="text/x-template">
    <div id="tpy-object-container" data-link="{on 'click' '.card' showDetail}">
        {^{for model.templates}}
        <div class="card" data-id="{{:id}}">
            <div class="image-wrapper">
                <img src="{{:(preview||'//:0')}}" alt="" />
            </div>
            <div class="card-title">{{:name}}</div>
            <div class="card-body">
                <p>{{:description}}</p>
            </div>
            <div class="card-footer">
                {{if createdAt}}
                <span data-i18n="template.lastMod"></span><em>{{:createdAt}}</em>
                {{else}}<span>&nbsp;</span>
                {{/if}}
            </div>
        </div>
        {{/for}}
    </div>

    <div id="templateDetail" style="display:none;">
        {^{include model.activeTemplate}}
        <div class="template-card">
            <div class="template-content">
                <h4 data-i18n="general.description"></h4><p><em>{^{:description}}</em></p>
                <h4 data-i18n="general.creator"></h4><em>{^{:createdBy}}</em>
                <h4 data-i18n="general.license"></h4><em>{^{:license}}</em>
                <h4 data-i18n="general.category"></h4><em>{^{:category}}</em>
            </div>
            {{if published}}
            <div class="template-image" >
                 <img src="{{>preview}}" /><br>
                 <a href="{{>url}}" target="_blank">
                    <button class="ui-button ui-widget ui-corner-all" data-i18n="general.preview"></button>
                </a>
            </div>
            {{/if}}
        </div>
        {{/include}}
        <div class="template-buttons">
            <button class="ui-button ui-widget ui-corner-all" data-i18n="general.create" data-link="{on createObject}"></button>
            <button class="ui-button ui-widget ui-corner-all" data-i18n="general.close" data-link="{on closeDetail}"></button>
        </div>
    </div>
</script>

<script id="gui-tplchooser-edit-content" type="text/x-template">
    <div id="tpy-object-container"> <!-- data-link="{on 'click' '.card' showDetail}"-->
        {^{for model.objects ~open=openForEdition ~delete=delete ~owned=ownedByMe }}
        <div class="card" data-id="{{:id}}">
            <div class="image-wrapper">
                <img src="{{:(preview||'//:0')}}" alt="" />
            </div>
            <div class="card-title">{{:name}}</div>
            <div class="card-body">
                <p>{{:~translate('type.'+type)}}</p>
                {{if createdAt}}
                <p><span data-i18n="template.lastMod"></span><em>{{:createdAt}}</em></p>
                {{else}}<span>&nbsp;</span>
                {{/if}}
            </div>
            <div class="card-footer">
                {^{controlgroup}}
                    {^{on ~open #data}}{^{button ^tmpl=~translate('commands.open') /}}{{/on}}
                    {^{if ~owned(#data)}}
                    {^{on ~delete #data}}{^{button ^tmpl=~translate('commands.delete') /}}{{/on}}
                    {{/if}}
                {{/controlgroup}}
            </div>
        </div>
        {{/for}}
    </div>
</script>